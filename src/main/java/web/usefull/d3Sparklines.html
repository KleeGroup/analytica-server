<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript" src="http://d3js.org/d3.v3.js"></script>
		<style type="text/css">
			path {
				stroke: #808080;
				stroke-width: 1;
				fill: none;
			}

			path1 {
				stroke: #09C;
				stroke-width: 1;
				fill: none;
			}
			.area{
				fill: #ADD8E6;                  
    			stroke-width: 0px;     
			}

			.line {
				 fill: none;
				 stroke: #444;
				 stroke-width: 1.5px;
			}
		</style>
	</head>

	<body>
		<div>
			<ul>
				<li id="box">Serie1</li>
				<li id ="box1">Serie2</li> 
				<li id = "box2"> Serie3</li>
				<li id = "box3">Serie4</li>
				<li id = "box4" >Serie5</li>
			</ul>
		</div>		
 		<div id = "box5">
 		</div>
 		<!--Script for line sparklines-->
		<script type="text/javascript">
		var drawLine = function drawLine(data,id){
			var spacing = 3;
			var height = 15;
			//--------------------------------------------------------------------------------------
			var width = spacing*data.length;
			var graph = d3.select("#"+id).append("svg:svg").attr("width", width).attr("height", height);
			// X scale will fit values from 0-10 within pixels 0-100
			var x = d3.scale.linear().domain([0, data.length]).range([0, width]); 
			// Y scale will fit values from 0-10 within pixels 0-100
			var y = d3.scale.linear().domain([0, d3.max(data)]).range([0, height]);
	 
			// create a line object that represents the SVN line we're creating
			var line = d3.svg.line()
			.x(function(d,i) { return x(i);})
			.y(function(d) { return height-y(d);})

			var area = d3.svg.area()
			.x(function(d,i) { return x(i);})
			.y0(height)
			.y1(function(d) { return height-y(d);})

			// display the line by appending an svg:path element with the data line we created above
		

			graph.append("svg:path").attr("d", line(data));
			graph.append("svg:path").datum(data).attr("class", "area").attr("d", area);
			
			graph.selectAll("dot")
			.data(data)
			.enter().append("circle")
			.filter(function(d,i) { return i ==data.length-1;}) // <== This line
				.style("fill", "red") // <== and this one
				.attr("r", 3.5)
				.attr("cx", function(d,i) { return width; })
				.attr("cy", function(d) { return height-y(d); });
		}
		</script>

 		
 		<!--Script for bar sparklines-->
		<script type="text/javascript">
		var drawBar = function (data,id){
			var space = 1; // space between the bars
			var barWidth = 3;
			var height = 20;
			//----------------------------------------
			var	width = (barWidth+space) * data.length;
			var y = d3.scale.linear()
				.domain([0, d3.max(data)])
				.range([0, height]);
			var rectangle = d3.select(("#"+id)).append("svg")
				.attr("width", width)
				.attr("height", height)
				.attr("class","bar"); 

			var rectangle = rectangle.selectAll("rect")
				.data(data)
				.enter().append("rect")
					.attr("width", barWidth)
					.attr("height", y)
					.attr("y", function(d) {return height-y(d) ;})
					.attr("x", function(d, i) {return i * (barWidth+space);})
					.style("fill", function(d, i) { return i==(data.length-1)? "#C00" : "#09C";})
					//.on("mouseover", function() {d3.select(this).transition().style("fill", "#AA66CC");)
					//.on("mouseout", function(d, j) {d3.select(this).transition().style("fill", function(d, j) {return color[j];});})
					.append("title").text(function(d) {return d;})
					;
		}
		</script>


 		<!--Script for bar and line chart-->
		<script type="text/javascript">
		/*
			data = {bar:[],
					line:[]
					}
		*/

		var drawBrAndLine = function(datas,id){
			var margin = {top: 10, right: 50, bottom: 30, left: 50};
			var space = 10; // space between the bars
			var barWidth = 50;
			var height = 400;
			var max1 = 1850, max2 =33; 

			//----------------------------------------

			var	width = (barWidth+space) * (datas.bar).length;

			var x = d3.time.scale()
			.range([0, width]);

			var x2 = d3.scale.linear()
				.domain([0, 20])
				.range([0, width]);

			var y0 = d3.scale.linear()
				.domain([0, max1])
				.range([height,0]);

			var y1 = d3.scale.linear()
				.domain([0, max2])
				.range([height,0]);

			var xAxis = d3.svg.axis()
						.scale(x)
						.orient("bottom");

			var yLeftAxis = d3.svg.axis()
						.scale(y0)
						.orient("left");

			var yRightAxis = d3.svg.axis()
						.scale(y1)
						.orient("right");
			
			var graph = d3.select(("#"+id)).append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.attr("class","bar")
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

			graph.append("g")
				.attr("class", "x axis")
				.attr("transform", "translate(0," + height + ")")
				.call(xAxis);

			graph.append("g")
				.attr("class", "y axis")
				.attr("fill","#808080")
				.call(yLeftAxis)
				.append("text")
			    .attr("transform", "rotate(-90)")
			    .attr("y", 2)
			    .attr("dy", ".71em")
		      	.style("text-anchor", "end")
		      	.text("Response Time");

			graph.append("g")             
			        .attr("class", "y axis")    
			        .attr("transform", "translate(" + width + " ,0)")   
			        .style("fill", "#808080")       
			        .call(yRightAxis)
			        .append("text")
				    .attr("transform", "rotate(-90)")
				    .attr("y", -15)
				    .attr("dy", ".71em")
			      	.style("text-anchor", "end")
			      	.text("Hits");

			var rectangle = graph.selectAll("rect")
				.data(datas.bar)
				.enter().append("rect")
					.attr("width", barWidth)
					.attr("height", function(d) {return height-y0(d[1]);})
					.attr("y", function(d){return y0(d[1])})
					.attr("x", function(d, i) {return i * (barWidth+space);})
					.style("fill", "#09C")
					.append("title").text(function(d) {return d[1];})
				;
			var line = d3.svg.line()
				.x(function(d,i) { return i * (barWidth+space);})
				.y(function(d) { return y1(d[1]);});
			
 
		  graph.append("svg:path")
		      .datum(datas.line)
		      .attr("class", "line")
		      .attr("d", line);

		}
		</script>

			<script type="text/javascript">

					var data = [1, 2, 3, 4, 5, 10, 9, 8, 7, 6];
					drawBar(data,"box");

					data = [1, 2, 3, 4, 5, 10, 9, 8, 7, 6,5,8,9,2,15,6,5,5,8,25];
					drawBar(data,"box1");

					data = [15, 2, 21, 8, 13, 11, 9, 10, 7, 17,22,8,14,25,5,11,5,18,8,25,4,19,2,20,8,0,1,2,9,5,4];
					drawBar(data,"box2");

					data = [45000, 24000, 30000, 78000, 100000, 58000, 64000];
					drawBar(data,"box3");

					//the line sparkline
					data = [15, 2, 21, 8, 13, 11, 9, 10, 7, 17,22,8,14,25,5,11,5,18,8,25,4,19,2,20,8,0,1,2,9,5,4];
					drawLine(data,"box4");

					var data1 = [ [ 1136005200000 , 1214] , [ 1138683600000 , 285] , [ 1141102800000 , 455] , [ 1146369600000 , 125] , [ 1149048000000 , 1850] , [ 1151640000000 , 789] , [ 1154318400000 , 458] , [ 1156996800000 , 999] , [ 1159588800000 , 775] , [ 1162270800000 , 328] , [ 1164862800000 , 389]];

					var data2 = [ [ 1136005200000 , 33] , [ 1138683600000 , 15] , [ 1141102800000 , 2] , [ 1146369600000 , 14] , [ 1149048000000 , 28] , [ 1151640000000 , 7] , [ 1154318400000 , 15] , [ 1156996800000 , 13] , [ 1159588800000 , 17] , [ 1162270800000 , 12] , [ 1164862800000 , 8]];

					var datas = {
						bar:data1,
						line:data2
					}

					drawBrAndLine(datas,"box5");
			</script>


		

	</body>
</html>